{"version":3,"sources":["webpack:///webpack/bootstrap 8ca8fbf1d42638bf2f9b","webpack:///external \"mongoose\"","webpack:///./server/config.js","webpack:///external \"koa-router\"","webpack:///./server/index.js","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/mongodb/index.js","webpack:///./server/middlewares.js","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-json\"","webpack:///./server/routes/index.js","webpack:///./server/routes/api.js","webpack:///./server/routes/children/project.js","webpack:///./server/controllers/project.js","webpack:///external \"fs\"","webpack:///external \"simple-git/promise\"","webpack:///external \"cuid\"","webpack:///./server/const.js","webpack:///./server/mongodb/models/project.js","webpack:///./server/mongodb/schemas/project.js","webpack:///./server/mongodb/models/backup.js","webpack:///./server/mongodb/schemas/backup.js","webpack:///./server/controllers/base.js","webpack:///./nuxt.config.js","webpack:///external \"autoprefixer\"","webpack:///./server/routes/children/user.js","webpack:///./server/controllers/user.js","webpack:///./server/mongodb/models/user.js","webpack:///./server/mongodb/schemas/user.js"],"names":["app","name","version","server","port","static","root","options","mongodb","url","account","password","session","secretKey","host","process","env","HOST","PORT","config","isProd","nuxtConfig","require","dev","nuxt","builder","build","middlewares","use","router","routes","ctx","next","status","Promise","resolve","reject","res","on","render","req","promise","then","catch","listen","mongoose","connect","db","connection","err","console","log","once","headersSent","throw","body","data","type","message","emit","bodyParser","Router","api","allowedMethods","project","user","get","ProjectController","find","findOne","post","save","remove","findBackUp","updateBackup","initRepo","git","remote","init","addRemote","findRepoBranch","path","id","fs","existsSync","mkdirSync","inst","all","current","checkIsRepo","isRepo","branch","branchList","constructor","params","requestBody","request","cuid","Project","findOneAndUpdate","new","upsert","query","content","RegExp","map","_","_doc","number","total","size","totalElements","Backup","projectId","backupId","backup","$set","projects","backups","date","model","Schema","String","unique","createTime","Date","BaseController","module","exports","middleware","head","title","meta","charset","hid","link","rel","href","vendor","babel","plugins","libraryName","styleLibraryName","loaders","test","loader","limit","postcss","browsers","HOST_URL","loading","color","css","src","lang","UserController","avatar","User","role","level","Number","modules","Array"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8ca8fbf1d42638bf2f9b","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","export default {\r\n  app: {\r\n    name: 'demo',\r\n    version: '1.0.0'\r\n  },\r\n  server: {\r\n    port: 3000\r\n  },\r\n  static: {\r\n    root: './static',\r\n    options: {}\r\n  },\r\n  mongodb: {\r\n    name: 'test',\r\n    url: 'mongodb://localhost:27017/test',\r\n    account: 'chris',\r\n    password: '123456'\r\n  },\r\n  session: {\r\n    secretKey: '123'\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 2\n// module chunks = 0","import Koa from 'koa'\r\nimport {Nuxt, Builder} from 'nuxt'\r\nimport './mongodb'\r\nimport config from './config'\r\nimport middlewares from './middlewares'\r\nimport router from './routes'\r\n\r\nconst app = new Koa()\r\n\r\nconst host = process.env.HOST || '127.0.0.1'\r\nconst port = process.env.PORT || config.server.port\r\nconst isProd = process.env.NODE_ENV === 'production'\r\n\r\nlet nuxtConfig = require('../nuxt.config')\r\nnuxtConfig.dev = !(app.env === 'production')\r\n\r\nconst nuxt = new Nuxt(nuxtConfig)\r\n\r\nif (nuxtConfig.dev) {\r\n  const builder = new Builder(nuxt)\r\n  builder.build()\r\n}\r\n\r\nmiddlewares(app)\r\napp.use(router.routes())\r\napp.use(async (ctx, next) => {\r\n  ctx.status = 200\r\n  return new Promise((resolve, reject) => {\r\n    ctx.res.on('close', resolve)\r\n    ctx.res.on('finish', resolve)\r\n    nuxt.render(ctx.req, ctx.res, promise => {\r\n      promise.then(resolve).catch(reject)\r\n    })\r\n  })\r\n})\r\napp.listen(port, host)\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 5\n// module chunks = 0","import mongoose from 'mongoose'\r\nimport config from '../config'\r\n\r\nmongoose.connect(config.mongodb.url)\r\nconst db = mongoose.connection\r\n\r\ndb.on('error', err => {\r\n  console.log('数据库连接失败：' + err)\r\n})\r\ndb.once('open', () => {\r\n  console.log('数据库连接成功')\r\n})\r\ndb.on('disconnected', () => {\r\n  console.log('数据哭连接断开')\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/index.js","import bodyParser from 'koa-bodyparser'\r\nimport json from 'koa-json'\r\nimport config from './config'\r\n\r\nexport default (app) => {\r\n  app.use(async (ctx, next) => {\r\n    try {\r\n      await next()\r\n      if (ctx.status === 404 && ctx.res.headersSent === false) {\r\n        ctx.throw(404)\r\n      }\r\n      if (ctx.status === 200 && ctx.res.headersSent === false) {\r\n        ctx.body = {\r\n          status: 200,\r\n          data: ctx.body\r\n        }\r\n      }\r\n    } catch (err) {\r\n      ctx.status = err.status || 500\r\n      ctx.type = 'json'\r\n      ctx.body = {\r\n        status: ctx.status,\r\n        message: err.message\r\n      }\r\n      ctx.app.emit('error', err, ctx)\r\n    }\r\n  })\r\n  app.use(bodyParser())\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares.js","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-json\"\n// module id = 9\n// module chunks = 0","import Router from 'koa-router'\r\nimport api from './api'\r\nconst router = Router()\r\n\r\nrouter.use('/api', api.routes(), api.allowedMethods())\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/index.js","import Router from 'koa-router'\r\nimport project from './children/project'\r\nimport user from './children/user'\r\nconst router = Router()\r\n\r\nrouter.use('/project', project.routes(), project.allowedMethods())\r\nrouter.use('/user', user.routes(), user.allowedMethods())\r\n\r\nexport default router\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/api.js","import Router from 'koa-router'\r\nimport ProjectController from '../../controllers/project'\r\nconst router = Router()\r\n\r\nrouter.get('/list', ProjectController.find)\r\nrouter.get('/get', ProjectController.findOne)\r\nrouter.post('/save', ProjectController.save)\r\nrouter.post('/delete/:id', ProjectController.remove)\r\nrouter.get('/backup/list', ProjectController.findBackUp)\r\nrouter.post('/backup/update', ProjectController.updateBackup)\r\nrouter.get('/build', ProjectController.updateBackup)\r\n// router.get('/build', async (ctx, next) => {\r\n//   ctx.type = 'json'\r\n//   let {id} = ctx.query\r\n//   let message\r\n//   const project = projects.find(_ => _.id === id)\r\n//   try {\r\n//     const inst = git(`./projects/${project.id}`)\r\n//     // init reposity\r\n//     await inst.checkIsRepo()\r\n//       .then(isRepo => !isRepo && initRepo(inst, project.url))\r\n//       .then(() => inst.fetch())\r\n//       // .then(() => inst.pull('origin', 'develop'))\r\n//     message = await inst.branch()\r\n//   }\r\n//   catch (e) {\r\n//     console.error('failed: ', e)\r\n//     message = 'error'\r\n//   }\r\n//   ctx.body = message\r\n// })\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/routes/children/project.js","import fs from 'fs'\r\nimport git from 'simple-git/promise'\r\nimport cuid from 'cuid'\r\nimport {backups} from '../const'\r\nimport Project from '../mongodb/models/project'\r\nimport Backup from '../mongodb/models/backup'\r\nimport BaseController from './base'\r\n\r\nconst initRepo = (git, remote) => git.init().then(() => git.addRemote('origin', remote))\r\nconst findRepoBranch = async project => {\r\n  const path = `./projects/${project.id}`\r\n  if (!fs.existsSync(path)) {\r\n    fs.mkdirSync(path)\r\n  }\r\n  const inst = git(path)\r\n  let {all, current} = await inst.checkIsRepo()\r\n    .then(isRepo => !isRepo && initRepo(inst, project.url))\r\n    .then(() => inst.branch())\r\n  return {\r\n    ...project,\r\n    current,\r\n    branchList: all\r\n  }\r\n}\r\n\r\nclass ProjectController extends BaseController {\r\n  constructor (params) {  \r\n    super(params)\r\n\r\n    this.name = params.name\r\n    this.url = params.url\r\n  }\r\n  // 保存项目信息\r\n  static async save(ctx, next) {\r\n    let requestBody = ctx.request.body\r\n    let {id, name, url} = requestBody\r\n    id = id || cuid()\r\n    let data = await Project.findOneAndUpdate({id}, {id, name, url}, {new: true, upsert: true})\r\n    ctx.body = data\r\n  }\r\n  // 删除项目信息\r\n  static async remove(ctx, next) {\r\n    let {id} = ctx.params\r\n    let res = await Project.remove({ id })\r\n    ctx.body = res\r\n  }\r\n  // 获取项目信息\r\n  static async findOne(ctx, next) {\r\n    let {id} = ctx.params\r\n    let res = await Project.findOne({id})\r\n    ctx.body = res\r\n  }\r\n  // 获取项目列表\r\n  static async find(ctx, next) {\r\n    let {name = ''} = ctx.query\r\n    let content = await Project.find({name: new RegExp(name)})\r\n    content = await Promise.all(content.map(_ => findRepoBranch(_._doc)))\r\n    ctx.body = {\r\n      content,\r\n      number: 1,\r\n      total: 1,\r\n      size: 10,\r\n      totalElements: 10\r\n    }\r\n  }\r\n  // 获取项目备份列表\r\n  static async findBackUp(ctx, next) {\r\n    let {id} = ctx.query\r\n    let content = await Backup.find({projectId: id})\r\n    ctx.body = {\r\n      content,\r\n      number: 1,\r\n      total: 1,\r\n      size: 10,\r\n      totalElements: 10\r\n    }\r\n  }\r\n  static async updateBackup (ctx, next) {\r\n    let requestBody = ctx.request.body\r\n    let {id, backupId} = requestBody\r\n    let backup = await Backup.findOne({id: backupId, projectId: id})\r\n    let res = await Project.findOneAndUpdate({id}, {$set: { backup }})\r\n    ctx.body = res\r\n  }\r\n}\r\n\r\nexport default ProjectController\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/project.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"simple-git/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"simple-git/promise\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"cuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cuid\"\n// module id = 16\n// module chunks = 0","export const projects = [\r\n  {id: '1', name: 'tvi-trace-oa', url: 'https://gitee.com/tvi-center/tvi-trace-oa'},\r\n  {id: '2', name: 'tvi-trace-admin', url: 'https://gitee.com/tvi-center/tvi-trace-admin'}\r\n]\r\n\r\nexport const backups = [\r\n  {id: '1', name: '2018-01-27', date: '2018-01-27'},\r\n  {id: '2', name: '2018-01-28', date: '2018-01-28'}\r\n]\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/const.js","import mongoose from 'mongoose'\r\nimport ProjectSchema from '../schemas/project'\r\n\r\nconst Project = mongoose.model('Project', ProjectSchema)\r\n\r\nexport default Project\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/models/project.js","import mongoose from 'mongoose'\r\nconst Schema = mongoose.Schema\r\n\r\nconst Project = new Schema({\r\n\tid: {type: String, unique: true},\r\n\tname: {type: String},\r\n\turl: {type: String},\r\n\tbackup: {\r\n\t\tid: String,\r\n\t\tname: String,\r\n\t\tcreateTime: Date\r\n\t}\r\n})\r\n\r\nexport default Project\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/schemas/project.js","import mongoose from 'mongoose'\r\nimport BackupSchema from '../schemas/backup'\r\n\r\nconst Backup = mongoose.model('Backup', BackupSchema)\r\n\r\nexport default Backup\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/models/backup.js","import mongoose from 'mongoose'\r\nconst Schema = mongoose.Schema\r\n\r\nconst Backup = new Schema({\r\n  id: {type: String, unique: true},\r\n  projectId: {type: String},\r\n  name: {type: String},\r\n  branch: {\r\n    id: String,\r\n    name: String\r\n  },\r\n\tcreateTime: {type: Date}\r\n})\r\n\r\nexport default Backup\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/schemas/backup.js","class BaseController {\r\n\tconstructor ({id}) {\r\n    this.id = id\r\n\t}\r\n}\r\n\r\nexport default BaseController\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/base.js","module.exports = {\r\n  router: {\r\n    middleware: 'auth'\r\n  },\r\n  head: {\r\n    title: 'nuxt-element-demo',\r\n    meta: [\r\n      { charset: 'utf-8' },\r\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\r\n      { hid: 'description', name: 'description', content: 'Nuxt.js + element-ui DEMO' }\r\n    ],\r\n    link: [\r\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\r\n    ]\r\n  },\r\n  build: {\r\n    vendor: [\r\n      'element-ui', 'axios'\r\n    ],\r\n    babel: {\r\n      plugins: [\r\n        ['component', [{\r\n          libraryName: 'element-ui',\r\n          styleLibraryName: 'theme-chalk'\r\n        }]],\r\n        'transform-decorators-legacy'\r\n      ]\r\n    },\r\n    loaders: [\r\n      {\r\n        test: /\\.scss$/,\r\n        loaders: ['style', 'css', 'sass']\r\n      },\r\n      {\r\n        test: /\\.(png|jpe?g|gif|svg)$/,\r\n        loader: 'url-loader',\r\n        query: {\r\n          limit: 1000,\r\n          name: 'img/[name].[hash:7].[ext]'\r\n        }\r\n      },\r\n      {\r\n        test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/,\r\n        loader: 'url-loader',\r\n        query: {\r\n          limit: 1000,\r\n          name: 'fonts/[name].[hash:7].[ext]'\r\n        }\r\n      }\r\n    ],\r\n    postcss: [\r\n      require('autoprefixer')({\r\n        browsers: ['last 3 versions']\r\n      })\r\n    ]\r\n  },\r\n  env: {\r\n    HOST_URL: process.env.HOST_URL || 'http://127.0.0.1:3000'\r\n  },\r\n  loading: { color: '#3B8070' },\r\n  css: [\r\n    'element-ui/lib/theme-chalk/index.css',\r\n    { src: '~assets/css/index.scss', lang: 'scss' },\r\n    { src: '~assets/css/reset.scss', lang: 'scss' }\r\n  ],\r\n  plugins: [\r\n    '~plugins/element-ui'\r\n  ]\r\n}\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","module.exports = require(\"autoprefixer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"autoprefixer\"\n// module id = 24\n// module chunks = 0","import Router from 'koa-router'\r\nimport UserController from '../../controllers/user'\r\nconst router = Router()\r\n\r\nrouter.get('/list', UserController.find)\r\nrouter.get('/get/:id', UserController.findOne)\r\nrouter.post('/save', UserController.save)\r\nrouter.post('/delete/:id', UserController.remove)\r\n\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/routes/children/user.js","import cuid from 'cuid'\r\nimport User from '../mongodb/models/user'\r\nimport BaseController from './base'\r\n\r\nclass UserController extends BaseController {\r\n  constructor (params) {  \r\n    super(params)\r\n\r\n    this.account = params.account\r\n    this.password = params.password\r\n  }\r\n  // 保存用户信息\r\n  static async save(ctx, next) {\r\n    let requestBody = ctx.request.body\r\n    let {id, name, avatar} = requestBody\r\n    id = id || cuid()\r\n    let res = await User.findOneAndUpdate({id}, {id, name, avatar}, {new: true, upsert: true})\r\n    ctx.body = res\r\n  }\r\n  // 删除用户信息\r\n  static async remove(ctx, next) {\r\n    let {id} = ctx.params\r\n    let res = await User.remove({ id })\r\n    ctx.body = res\r\n  }\r\n  // 获取用户信息\r\n  static async findOne(ctx, next) {\r\n    let {id} = ctx.params\r\n    let res = await User.findOne({ id })\r\n    ctx.body = res\r\n  }\r\n  // 获取用户列表\r\n  static async find(ctx, next) {\r\n    let {name} = ctx.query\r\n    let content = await User.find({name: new RegExp(name)})\r\n    ctx.body = {\r\n      content,\r\n      number: 1,\r\n      total: 1,\r\n      size: 10,\r\n      totalElements: 10\r\n    }\r\n  }\r\n}\r\n\r\nexport default UserController\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","import mongoose from 'mongoose'\r\nimport UserSchema from '../schemas/user'\r\n\r\nconst User = mongoose.model('User', UserSchema)\r\n\r\nexport default User\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/models/user.js","import mongoose from 'mongoose'\r\nconst Schema = mongoose.Schema\r\n\r\nconst User = new Schema({\r\n\tid: {type: String, unique: true},\r\n\taccount: {type: String, unique: true},\r\n\tpassword: {type: String},\r\n\tavatar: {type: String},\r\n\tname: {type: String},\r\n\trole: {\r\n\t\tid: String,\r\n\t\tname: String,\r\n\t\tlevel: Number,\r\n\t\tmodules: Array\r\n\t},\r\n})\r\n\r\nexport default User\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/mongodb/schemas/user.js"],"sourceRoot":""}